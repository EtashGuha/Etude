(* https://github.com/apple/swift/blob/master/lib/SILOptimizer/Transforms/AssumeSingleThreaded.cpp *)